$(document).ready(function(){function g(a){e.addClass("active");galleryPage=archivePage=1;galleryEmpty=archiveEmpty=!1;f.each(function(){$($(this).data("href")).hide();$(this).removeClass("active")});a=a.data("href");document.location.hash=a;$(a).show()}function l(a,d){$('#month input[name="year"]').val(a);$('#month input[name="month"]').val(d);var c=new Date(a,d-1,1),b="";switch(c.getMonth()+1){case 1:b="January";break;case 2:b="February";break;case 3:b="March";break;case 4:b="April";break;case 5:b=
"May";break;case 6:b="June";break;case 7:b="July";break;case 8:b="August";break;case 9:b="September";break;case 10:b="October";break;case 11:b="November";break;case 12:b="December"}$("#calendarControls h3").text(b+" "+c.getFullYear());context={year:a,month:d};$.get("/events/month/",context,function(a){$calendar.empty();$calendar.append(a)})}function m(a){debugger;$.get("/events/prev/",a,function(a){var c=$("#prev"),b=a.date;a.exists?(c.data("year",b.year),c.data("month",b.month),c.attr("data-year",
b.year),c.attr("data-month",b.month),c.removeClass("inactive")):c.addClass("inactive")})}function n(a){$.get("/events/next/",a,function(a){var c=$("#next"),b=a.date;a.exists?(c.data("year",b.year),c.data("month",b.month),c.attr("data-year",b.year),c.attr("data-month",b.month),c.removeClass("inactive")):c.addClass("inactive")})}document.location.hash&&setTimeout(function(){window.scrollTo(0,0)},1);""===document.location.hash||"#"===document.location.hash||"#calendar"===document.location.hash?($("#calendar").show(),
$("#tabsCalendar").addClass("active")):"#byDate"===document.location.hash?($("#byDate").show(),$("#tabsByDate").addClass("active")):"#byLocation"===document.location.hash&&($("#byLocation").show(),$("#tabsByLocation").addClass("active"));var h=$("#tabs"),f=$("#tabs > li"),e=$("#tabs > li.active");$(e.data("href")).show();f.on("click touchstart",function(a){a.preventDefault();a.stopPropagation();f.removeClass("active");"click"===a.type?(g($(this)),f.each(function(){$($(this).data("href")).hide()}),
e=$(this),$($(this).data("href")).show()):$(this).addClass("active")});f.on("touchend",function(a){var d=a.changedTouches[0];d=$(document.elementFromPoint(d.pageX,d.pageY));d.parent("#tabs").length&&(g($(this)),f.removeClass("active").each(function(){$($(this).data("href")).hide()}),e=d,d.addClass("active"),$(d.data("href")).show(),a.stopPropagation())});h.mouseenter(function(){e.removeClass("active")});h.mouseleave(function(){e.addClass("active")});$(window).on("touchstart",function(){e.addClass("active")});
$(window).on("touchend",function(){f.removeClass("active");e.addClass("active")});$calendar=$("#calendar");var k=$("#prev, #next");k.click(function(){var a=$(this);if(!a.hasClass("inactive")){var d=a.data("year");a=a.data("month");k.removeClass("inactive");var c={year:d,month:a};l(d,a);m(c);n(c)}})});
