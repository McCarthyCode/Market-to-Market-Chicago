$(document).ready(function(){function k(a){d.addClass("active");galleryPage=archivePage=1;galleryEmpty=archiveEmpty=!1;e.each(function(){$($(this).data("href")+"View").hide();$(this).removeClass("active")});a=a.data("href");document.location.hash=a;$(a+"View").show()}function n(a){$('#month input[name="year"]').val(a.year);$('#month input[name="month"]').val(a.month);var b=new Date(a.year,a.month-1,1),c="";switch(b.getMonth()+1){case 1:c="January";break;case 2:c="February";break;case 3:c="March";
break;case 4:c="April";break;case 5:c="May";break;case 6:c="June";break;case 7:c="July";break;case 8:c="August";break;case 9:c="September";break;case 10:c="October";break;case 11:c="November";break;case 12:c="December"}$("#calendarControls h3").text(c+" "+b.getFullYear());$.get("/events/month/",a,function(a){f.empty();f.append(a)})}function p(a){$.get("/events/by-date/",a,function(a){g.empty();g.append(a)})}function q(a){$.get("/events/by-location/",a,function(a){h.empty();h.append(a)})}function r(a){$.get("/events/prev/",
a,function(a){var c=$("#prev"),b=a.date;console.log(a);a.disabled?c.addClass("disabled"):(c.data("year",b.year),c.data("month",b.month),c.attr("data-year",b.year),c.attr("data-month",b.month),c.removeClass("disabled"))})}function t(a){$.get("/events/next/",a,function(a){var c=$("#next"),b=a.date;console.log(a);c.data("year",b.year);c.data("month",b.month);c.attr("data-year",b.year);c.attr("data-month",b.month);c.removeClass("disabled")})}var f=$("#calendarView"),g=$("#byDateView"),h=$("#byLocationView");
""===document.location.hash||"#"===document.location.hash||"#calendar"===document.location.hash?(f.show(),$("#tabsCalendar").addClass("active")):"#byDate"===document.location.hash?(g.show(),$("#tabsByDate").addClass("active")):"#byLocation"===document.location.hash&&(h.show(),$("#tabsByLocation").addClass("active"));var l=$("#tabs"),e=$("#tabs > li"),d=$("#tabs > li.active");$(d.data("href")+"View").show();e.on("click touchstart",function(a){a.preventDefault();a.stopPropagation();e.removeClass("active");
"click"===a.type?(k($(this)),e.each(function(){$($(this).data("href")+"View").hide()}),d=$(this),$($(this).data("href")+"View").show()):$(this).addClass("active")});e.on("touchend",function(a){var b=a.changedTouches[0];b=$(document.elementFromPoint(b.pageX,b.pageY));b.parent("#tabs").length&&(k($(this)),e.removeClass("active").each(function(){$($(this).data("href")+"View").hide()}),d=b,b.addClass("active"),$(b.data("href")+"View").show(),a.stopPropagation())});l.mouseenter(function(){d.removeClass("active")});
l.mouseleave(function(){d.addClass("active")});$(window).on("touchstart",function(){d.addClass("active")});$(window).on("touchend",function(){e.removeClass("active");d.addClass("active")});var m=$("#prev, #next");m.click(function(){var a=$(this);if(!a.hasClass("disabled")){var b=a.data("year");a=a.data("month");m.removeClass("disabled");b={year:b,month:a};n(b);p(b);q(b);r(b);t(b)}})});
