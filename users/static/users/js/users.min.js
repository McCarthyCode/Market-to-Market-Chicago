$(document).ready(function(){function k(){l.slideUp(500);e.prop("required",!1);p.prop("required",!1);q.prop("required",!1);r.prop("required",!1);t.prop("required",!1)}$("#dateStart").datetimepicker();$("#dateEnd").datetimepicker();$("#endsOn").datetimepicker();$("#addEvent .h3").click(function(){$("#addEventForm").slideToggle(500);setTimeout(function(){$("#addEvent .h3 i").toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},500)});$("#allDay").change(function(){return $("#dateEndInputGroup").slideToggle(500)});
$("#advancedRepeatToggle").click(function(a){a.preventDefault();a.stopPropagation();$("#advancedRepeatCollapse").slideToggle(500);setTimeout(function(){$("#advancedRepeatToggle i").toggleClass("fa-chevron-down").toggleClass("fa-chevron-up")},500)});$("#weekdayList label").click(function(a){a.stopPropagation();$(this).toggleClass("active")});var u=$("#ends");u.change(function(){var a=Number(u.val()),b=$("#endsOnContainer"),c=$("#endsOnInput"),d=$("#endsAfter");switch(a){default:case 0:c.prop("required",
!1);d.prop("required",!1);b.slideUp(500);d.slideUp(500);break;case 1:c.prop("required",!0);d.prop("required",!1);d.is(":visible")?(d.slideUp(500),setTimeout(function(){b.slideDown(500)},500)):b.slideDown(500);break;case 2:c.prop("required",!1),d.prop("required",!0),b.is(":visible")?(b.slideUp(),setTimeout(function(){d.slideDown(500)},500)):d.slideDown(500)}});var m=$("#locationId"),f=$("#locationName"),p=$("#locationCategory"),n=$("#neighborhoodId"),e=$("#neighborhoodName"),l=$("#locationCollapse"),
q=$('#locationCollapse input[name="address1"]'),r=$('#locationCollapse input[name="city"]'),t=$('#locationCollapse input[name="state"]');$("#locationToggle").click(function(){l.is(":visible")?k():(l.slideDown(500),e.prop("required",!0),p.prop("required",!0),q.prop("required",!0),r.prop("required",!0),t.prop("required",!0))});var b=-1,g=0,v=$("#neighborhoodAutocomplete");e.on("input",function(a){$("#neighborhoodAutocomplete ul").remove();n.val(0);a=$(this).val();""!==a&&$.get("/locations/neighborhoods/autocomplete",
{q:a},function(a){v.append(a);b=-1;g=$("#neighborhoodAutocomplete li").length})});e.keydown(function(a){switch(a.keyCode){case 13:a.preventDefault();a=$("#neighborhoodAutocomplete li.active");1===$("#neighborhoodAutocomplete li").length&&(a=$("#neighborhoodAutocomplete li:first-child"));n.val(a.data("id"));e.val(a.text());$("#neighborhoodAutocomplete ul").remove();break;case 38:b=-1===b?g-1:(b+1)%g;$("#neighborhoodAutocomplete li").removeClass("active");$("#neighborhoodAutocomplete li:nth-child("+
(b+1)+")").addClass("active");break;case 40:b=-1===b?0:(b+g-1)%g,$("#neighborhoodAutocomplete li").removeClass("active"),$("#neighborhoodAutocomplete li:nth-child("+(b+1)+")").addClass("active")}});v.on("click","ul li",function(){n.val($(this).data("id"));e.val($(this).text());$("#neighborhoodAutocomplete ul").remove()});e.focusout(function(){$("#neighborhoodAutocomplete ul").remove()});var c=-1,h=0,w=$("#locationAutocomplete");f.on("input",function(a){$("#locationAutocomplete ul").remove();m.val(0);
a=$(this).val();""!==a&&$.get("/locations/autocomplete",{q:a},function(a){w.append(a);c=-1;h=$("#locationAutocomplete li").length})});f.keydown(function(a){switch(a.keyCode){case 13:a.preventDefault();a=$("#locationAutocomplete li.active");1===$("#locationAutocomplete li").length&&(a=$("#locationAutocomplete li:first-child"));m.val(a.data("id"));f.val(a.text());$("#locationAutocomplete ul").remove();k();break;case 38:c=-1===c?h-1:(c+1)%h;$("#locationAutocomplete li").removeClass("active");$("#locationAutocomplete li:nth-child("+
(c+1)+")").addClass("active");break;case 40:c=-1===c?0:(c+h-1)%h,$("#locationAutocomplete li").removeClass("active"),$("#locationAutocomplete li:nth-child("+(c+1)+")").addClass("active")}});w.on("click","ul li",function(){m.val($(this).data("id"));f.val($(this).text());$("#locationAutocomplete ul").remove();k()});f.focusout(function(){$("#locationAutocomplete ul").remove()})});
