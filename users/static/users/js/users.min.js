$(document).ready(function(){function g(){h.slideUp(500);0!==Number(e.val())&&(c.prop("required",!1),k.prop("required",!1),l.prop("required",!1),m.prop("required",!1));n.val("false")}$("#dateStart").datetimepicker();$("#dateEnd").datetimepicker();$("#endsOn").datetimepicker();$("#addEvent .h3").click(function(){$("#addEventForm").slideToggle(500);setTimeout(function(){$("#addEvent .h3 i").toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},500)});$("#allDay").change(function(){return $("#dateEndInputGroup").slideToggle(500)});
$("#advancedRepeatToggle").click(function(a){a.preventDefault();a.stopPropagation();$("#advancedRepeatCollapse").slideToggle(500);setTimeout(function(){$("#advancedRepeatToggle i").toggleClass("fa-chevron-down").toggleClass("fa-chevron-up")},500)});$("#weekdayList label").click(function(a){a.stopPropagation();$(this).toggleClass("active")});var p=$("#ends");p.change(function(){var a=Number(p.val()),b=$("#endsOnContainer"),c=$("#endsOnInput"),d=$("#endsAfter");switch(a){default:case 0:c.prop("required",
!1);d.prop("required",!1);b.slideUp(500);d.slideUp(500);break;case 1:c.prop("required",!0);d.prop("required",!1);d.is(":visible")?(d.slideUp(500),setTimeout(function(){b.slideDown(500)},500)):b.slideDown(500);break;case 2:c.prop("required",!1),d.prop("required",!0),b.is(":visible")?(b.slideUp(),setTimeout(function(){d.slideDown(500)},500)):d.slideDown(500)}});var e=$("#locationId"),c=$("#locationName"),h=$("#locationCollapse"),k=$('#locationCollapse input[name="address1"]'),l=$('#locationCollapse input[name="city"]'),
m=$('#locationCollapse input[name="state"]'),n=$("#locationCollapseBool");$("#locationToggle").click(function(){h.is(":visible")?g():(h.slideDown(500),c.prop("required",!0),k.prop("required",!0),l.prop("required",!0),m.prop("required",!0),n.val("true"))});var b=-1,f=0,q=$("#locationAutocomplete");c.on("input",function(a){$("#locationAutocomplete ul").remove();a=$(this).val();""===a?e.val(0):$.get("/events/locations",{q:a},function(a){q.append(a);f=$("#locationAutocomplete li").length;b=-1})});c.keydown(function(a){switch(a.keyCode){case 13:a.preventDefault();
a=$("#locationAutocomplete li.active");1===$("#locationAutocomplete li").length&&(a=$("#locationAutocomplete li:first-child"));e.val(a.data("id"));c.val(a.text());$("#locationAutocomplete ul").remove();g();break;case 38:b=-1===b?f-1:(b+1)%f;$("#locationAutocomplete li").removeClass("active");$("#locationAutocomplete li:nth-child("+(b+1)+")").addClass("active");break;case 40:b=-1===b?0:(b+f-1)%f,$("#locationAutocomplete li").removeClass("active"),$("#locationAutocomplete li:nth-child("+(b+1)+")").addClass("active")}});
q.on("click","ul li",function(){e.val($(this).data("id"));c.val($(this).text());$("#locationAutocomplete ul").remove();g()});c.focusout(function(){""!==$(this).val()&&0===Number(e.val())&&g()})});
